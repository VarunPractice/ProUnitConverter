USE [ProUnitConverterDB]
GO

/****** Object:  Table [dbo].[PUCLoginMaster]    Script Date: 18-04-2024 07:10:56 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[PUCLoginMaster](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[LoginID] [nvarchar](50) NOT NULL,
	[LoginPassword] [nvarchar](50) NOT NULL,
	[CreatedOn] [date] NOT NULL,
 CONSTRAINT [PK_PUCLoginMaster] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO


USE [ProUnitConverterDB]
GO

/****** Object:  Table [dbo].[Subunits]    Script Date: 18-04-2024 07:11:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Subunits](
	[SubunitID] [int] IDENTITY(1,1) NOT NULL,
	[UnitID] [int] NOT NULL,
	[Name] [varchar](50) NOT NULL,
	[ConversionFactor] [float] NOT NULL,
 CONSTRAINT [PK_Subunits] PRIMARY KEY CLUSTERED 
(
	[SubunitID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[Subunits]  WITH CHECK ADD  CONSTRAINT [FK_Subunits_Units] FOREIGN KEY([UnitID])
REFERENCES [dbo].[Units] ([UnitId])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[Subunits] CHECK CONSTRAINT [FK_Subunits_Units]
GO


USE [ProUnitConverterDB]
GO

/****** Object:  Table [dbo].[Units]    Script Date: 18-04-2024 07:11:48 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Units](
	[UnitId] [int] IDENTITY(1,1) NOT NULL,
	[UnitName] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_tblUnits] PRIMARY KEY CLUSTERED 
(
	[UnitId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO


USE [ProUnitConverterDB]
GO

/****** Object:  StoredProcedure [dbo].[sp_GetAllUnits]    Script Date: 18-04-2024 07:12:12 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[sp_GetAllUnits]
AS
BEGIN
    SET NOCOUNT ON;

    -- Select all units
    SELECT UnitId, UnitName
    FROM Units u

    -- Now select all subunits
    SELECT SubunitId, Name, UnitId
    FROM Subunits
END
GO


USE [ProUnitConverterDB]
GO

/****** Object:  StoredProcedure [dbo].[ValidateLogin]    Script Date: 18-04-2024 07:12:24 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[ValidateLogin]
    @Username NVARCHAR(50),
    @Password NVARCHAR(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT COUNT(*) FROM PUCLoginMaster WHERE LoginID = @Username AND LoginPassword = @Password
END
GO





